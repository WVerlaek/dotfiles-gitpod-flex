if ! command -v npm &> /dev/null; then
    echo "Skipping claude code install, npm not found"
    return 0
fi

if command -v claude &> /dev/null; then
    echo "Claude Code is already installed"
    return 0
fi

echo "Installing Claude Code..."
npm install -g @anthropic-ai/claude-code
claude config set -g theme dark

echo "Copying Claude config from root..."
sudo cp /root/.claude.json ~/.claude.json || {
    echo "No Claude config found in root, skipping copy"
    return 0
}

sudo chown "$(id -u):$(id -g)" ~/.claude.json
